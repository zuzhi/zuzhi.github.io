---
layout: post
title: "OS X El Captain On N55SL- Hackintosh"
data: 2016-01-17 20:56:00
categories: hackintosh
---
![我的系统磁盘分区](https://raw.githubusercontent.com/zuzhi/zuzhi.github.io/master/img/tutorial-captures/snip_20160117144412.png "我的系统磁盘分区")
## 写在前面
OS X El Captain也就是10.11这个版本出来已经有一阵子了，要是要求读书的时候，我肯定早就当小白鼠尝鲜了，无奈之前太忙没时间折腾。还好最近偷闲得一两个周末，把系统重新装了一下，苹果系统还是那么可口。✌

### 注意事项
如果你之前没有接触过黑苹果，有些事情你要先有所了解。

- 安装之前要对重要的数据进行备份。
- 安装黑苹果有多种方式，针对我的机器，我采用的方式是MBR（主引导记录）＋Chameleon（变色龙启动器）的方式。
- OS X到目前最新版是10.11 El captain
- 安装有风险，大家在充分了解风险后选择安装。出现问题，可以联系我帮忙解决，但对于出现的问题概不负责。
- 还有，风险主要出现在安装驱动的时候，需要指出的是，之前有一次安装声卡驱动时，在系统启动的过程中麦克风自动打开，并且对接收的声音放大得很大，我哥对着麦克风吼了一声，两个喇叭就烧冒烟了。
- /Extra文件夹 － 在系统的根目录下，包含了变色龙启动时使用的启动文件和驱动
- /S/L/E － 即/System/Library/Extensions，系统的驱动，苹果的驱动文件后缀为kext

## 我的机器(华硕N55SL)的参数
- CPU i7-2670
- 显卡 NVDIA-635M
- 其他：显示屏换过，换成了1080p的高分屏；硬盘也换过，换成了ADATA的240G固态硬盘；还有就是光驱拆掉了。

## 安装

### 1. 下载懒人版镜像，及安装中的各种工具
百度云：http://pan.baidu.com/s/1pKeeB3t 提取密码：`d912`

### 2. 写入懒人版镜像到硬盘分区（启动分区）

#### 2.1. 安装Paragon HFS+ 10.5
安装该工具，使得在Windows下可以读写苹果的HFS＋分区。
#### 2.2. 准备硬盘分区
要制作硬盘启动分区，需要在现有的硬盘分区中分出一个10G（实际上7G就够了）左右大小的可用空间，可以使用DiskGenius工具来调整分区得到，得到该可用空间后，使用系统的磁盘工具在可用空间上建立分区，不要格式化，这样我们就得到来一个RAW格式的磁盘分区。
另外，还要一个系统分区，大小根据你的硬盘大小来决定，分区名随意，分区格式同样不要格式化。因为我的是240G的固态硬盘，所以分了大概80G，名字叫做El Captain。

#### 2.2. 使用硬盘安装助手将镜像写入到硬盘
以管理员身份运行硬盘安装助手，去掉除了［写入］之外的勾选项，选择之前下载的懒人版镜像，选择之前制作好的磁盘分区（不要选错！），写入。
![使用硬盘安装助手将镜像写入到硬盘](https://raw.githubusercontent.com/zuzhi/zuzhi.github.io/master/img/tutorial-captures/snip_20160117144615.png "使用硬盘安装助手将镜像写入到硬盘")

### 3. 启动分区－/Extra调整以及修改

3.1. 安装变色龙启动器，分两步，一是使用变色龙安装器安装，二是替换C盘根目录下的wowpc.iso，替换成要使用的版本。本次安装使用了2795版

3.2. 替换启动分区Extra目录下的文件

### 4. 启动分区－文件调整

4.1. 之前制作的启动分区，根目录下少了一个文件BaseSystem.dmg，但是制作启动分区是，硬盘安装助手会减小分区的大小，导致分区空间不足以放下这个文件，我的解决方法是删除掉/S/L/E下的NVD开头的和AMD开头的驱动，删除/S/I/P下的两个PayLoads文件夹，这样启动分区就可以放下BaseSystem.dmg文件了，将其放入根目录。

### 5. 启动分区－启动
不出意外的话，选择启动分区（OS X BaseSystem），回车，就可以启动安装系统了。注：变色龙的启动标志（kernel flags）在/Extra下的org.chameleon.Boot.plist文件里配置。其中-f代表重建系统缓存，-v表示啰嗦模式，会显示启动过程中执行记录。也可以在选择里启动磁盘时，手动敲上这些标志。

### 6. 安装
这里只需要按照提示安装，选择之前制作好的系统分区（不要选错！），安装过程中可以查看安装日志

### 7. 系统分区－加入/Extra
安装完成后，先别忙着启动苹果系统。进入Windows，将启动盘（OS X BaseSystem）的/Extra文件夹拷贝到系统盘（El Captain）

### 8. 系统分区－启动
启动。一些简单的配置之后，进入系统。搞定。
最后我的系统磁盘是这样的：
![我的系统磁盘分区](https://raw.githubusercontent.com/zuzhi/zuzhi.github.io/master/img/tutorial-captures/snip_20160117144412.png "我的系统磁盘分区")
